<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Troop Training Calculator - Travian Tools</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Vollkorn:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../css/style.css">
    <style>
        .calc-wrapper { max-width: 1200px; margin: 0 auto; }
        
        /* Settings Bar */
        .settings-bar { 
            background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #c9b7a2; 
            margin-bottom: 25px; display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px;
        }
        .settings-bar label { display: block; font-size: 0.75rem; font-weight: bold; color: #777; margin-bottom: 4px; text-transform: uppercase; }
        .settings-bar select, .settings-bar input { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; font-weight: bold; color: #333; box-sizing: border-box; }

        /* Training Cards Grid */
        .training-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); gap: 20px; margin-bottom: 40px; }
        
        .train-card { background: #fff; border: 1px solid #c9b7a2; border-radius: 8px; overflow: hidden; display: flex; flex-direction: column; }
        .card-header { padding: 12px 15px; font-family: 'Vollkorn', serif; font-weight: bold; font-size: 1.1rem; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
        .header-inf { background-color: #e8f5e9; color: #2e7d32; border-bottom-color: #c8e6c9; }
        .header-cav { background-color: #fff3e0; color: #ef6c00; border-bottom-color: #ffe0b2; }
        .header-sie { background-color: #f3e5f5; color: #7b1fa2; border-bottom-color: #e1bee7; }

        .card-body { padding: 20px; flex: 1; }
        .unit-select { width: 100%; padding: 10px; font-size: 1rem; margin-bottom: 20px; border: 1px solid #ccc; border-radius: 4px; font-weight: bold; }

        /* Input Rows inside Card */
        .input-group { margin-bottom: 15px; border-bottom: 1px dashed #eee; padding-bottom: 15px; }
        .input-group:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        
        .input-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .input-row label { font-size: 0.9rem; font-weight: bold; color: #555; }
        .input-row input { width: 60px; padding: 5px; text-align: center; border: 1px solid #ccc; border-radius: 4px; }
        
        .output-row { display: flex; justify-content: space-between; align-items: center; font-size: 0.85rem; color: #666; background: #f9f9f9; padding: 6px 10px; border-radius: 4px; }
        .output-val { font-weight: bold; color: #333; }
        
        /* Card Footer (Summary) */
        .card-footer { background-color: #fafafa; border-top: 1px solid #eee; padding: 15px; font-size: 0.9rem; }
        .footer-title { font-size: 0.75rem; text-transform: uppercase; color: #999; font-weight: bold; margin-bottom: 8px; letter-spacing: 1px; }
        
        .summary-stats { display: flex; justify-content: space-between; margin-bottom: 12px; font-weight: bold; color: #333; }
        .summary-stats .unit { font-weight: normal; margin-left: 2px; }
        
        .cost-grid { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 5px; font-size: 0.85rem; color: #555; background: #fff; padding: 8px; border: 1px solid #eee; border-radius: 4px; }
        .cost-item { display: flex; flex-direction: column; align-items: center; }
        .cost-item small { font-size: 0.7rem; color: #999; margin-bottom: 2px; }

        /* Global Results Footer */
        .results-box { 
            background: #333; color: #fff; padding: 25px; border-radius: 8px; 
            display: grid; grid-template-columns: 1fr; gap: 20px;
        }
        
        .global-stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px; border-bottom: 1px solid #555; padding-bottom: 20px; }
        .g-stat h4 { margin: 0 0 8px 0; color: #aaa; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; }
        .g-val { font-size: 1.2rem; font-weight: bold; font-family: 'Roboto', sans-serif; display: flex; align-items: center; gap: 8px; }
        .g-sub { font-size: 0.9rem; color: #ccc; margin-top: 4px; }

        .breakdown-row { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.95rem; }
        .breakdown-row span:last-child { font-weight: bold; color: #859f51; }

        .global-cost-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 10px; }
        .gc-item { background: rgba(255,255,255,0.1); padding: 8px; border-radius: 4px; text-align: center; }
        .gc-label { display: block; font-size: 0.75rem; color: #aaa; margin-bottom: 2px; text-transform: uppercase; }
        .gc-val { font-size: 1.1rem; font-weight: bold; font-family: 'Roboto', sans-serif; }

    </style>
</head>
<body>

<div class="container calc-wrapper">
    <div style="margin-bottom: 20px;">
        <a href="../../index.html" style="text-decoration: none; color: #859f51; font-weight: bold;">&larr; Back to Hub</a>
    </div>

    <h1>Troop Training Calculator</h1>
    
    <div class="settings-bar">
        <div>
            <label>TRIBE</label>
            <select id="tribeSelect" onchange="TroopApp.updateUnitDropdowns()"></select>
        </div>
        <div>
            <label>SERVER SPEED</label>
            <select id="serverSpeed" onchange="TroopApp.calculate()">
                <option value="1">1x</option>
                <option value="2">2x</option>
                <option value="3">3x</option>
                <option value="5">5x</option>
                <option value="10">10x</option>
            </select>
        </div>
        <div>
            <label>DURATION (HOURS)</label>
            <input type="number" id="duration" value="1" min="1" oninput="TroopApp.calculate()">
        </div>
        <div>
            <label>INF. HELMET</label>
            <select id="inf_helmet" onchange="TroopApp.calculate()">
                <option value="0">0%</option>
                <option value="10">10%</option>
                <option value="15">15%</option>
                <option value="20">20%</option>
            </select>
        </div>
        <div>
            <label>CAV. HELMET</label>
            <select id="cav_helmet" onchange="TroopApp.calculate()">
                <option value="0">0%</option>
                <option value="10">10%</option>
                <option value="15">15%</option>
                <option value="20">20%</option>
            </select>
        </div>
        <div>
            <label>ARTIFACT</label>
            <select id="artifact" onchange="TroopApp.calculate()">
                <option value="1.0">None (100% Time)</option>
                <option value="0.75">Small (75% Time)</option>
                <option value="0.5">Unique (50% Time)</option>
            </select>
        </div>
        <div>
            <label>ALLIANCE BONUS</label>
            <select id="allyBonus" onchange="TroopApp.calculate()">
                <option value="0">0%</option>
                <option value="0.02">2%</option>
                <option value="0.04">4%</option>
                <option value="0.06">6%</option>
                <option value="0.08">8%</option>
                <option value="0.10">10%</option>
            </select>
        </div>
    </div>

    <div class="training-grid">
        
        <div class="train-card">
            <div class="card-header header-inf">
                <span>‚öîÔ∏è Infantry</span>
                <small>Barracks</small>
            </div>
            <div class="card-body">
                <select id="unit_infantry" class="unit-select" onchange="TroopApp.calculate()"></select>
                
                <div class="input-group">
                    <div class="input-row">
                        <label>Standard Barracks</label>
                        <input type="number" id="lvl_barracks" value="20" min="0" max="20" oninput="TroopApp.calculate()">
                    </div>
                    <div class="output-row">
                        <span>Output</span>
                        <span class="output-val" id="out_inf_std">0</span>
                    </div>
                </div>

                <div class="input-group">
                    <div class="input-row">
                        <label>Great Barracks (3x)</label>
                        <input type="number" id="lvl_gb" value="0" min="0" max="20" oninput="TroopApp.calculate()">
                    </div>
                    <div class="output-row">
                        <span>Output</span>
                        <span class="output-val" id="out_inf_gb">0</span>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <div class="footer-title">Infantry Summary</div>
                <div class="summary-stats">
                    <div class="stat-item">Total: <span id="inf_total_units">0</span></div>
                    <div class="stat-item">Upkeep: <span id="inf_upkeep">0</span><span class="unit">/h</span></div>
                </div>
                <div class="cost-grid">
                    <div class="cost-item"><small>üå≤ Wood</small><span id="inf_wood">0</span></div>
                    <div class="cost-item"><small>üß± Clay</small><span id="inf_clay">0</span></div>
                    <div class="cost-item"><small>‚öíÔ∏è Iron</small><span id="inf_iron">0</span></div>
                    <div class="cost-item"><small>üåæ Crop</small><span id="inf_crop">0</span></div>
                </div>
            </div>
        </div>

        <div class="train-card">
            <div class="card-header header-cav">
                <span>üêé Cavalry</span>
                <small>Stable</small>
            </div>
            <div class="card-body">
                <select id="unit_cavalry" class="unit-select" onchange="TroopApp.calculate()"></select>
                
                <div class="input-group">
                    <div class="input-row">
                        <label>Standard Stable</label>
                        <input type="number" id="lvl_stable" value="20" min="0" max="20" oninput="TroopApp.calculate()">
                    </div>
                    <div class="output-row">
                        <span>Output</span>
                        <span class="output-val" id="out_cav_std">0</span>
                    </div>
                </div>

                <div class="input-group">
                    <div class="input-row">
                        <label>Great Stable (3x)</label>
                        <input type="number" id="lvl_gs" value="0" min="0" max="20" oninput="TroopApp.calculate()">
                    </div>
                    <div class="output-row">
                        <span>Output</span>
                        <span class="output-val" id="out_cav_gs">0</span>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <div class="footer-title">Cavalry Summary</div>
                <div class="summary-stats">
                    <div class="stat-item">Total: <span id="cav_total_units">0</span></div>
                    <div class="stat-item">Upkeep: <span id="cav_upkeep">0</span><span class="unit">/h</span></div>
                </div>
                <div class="cost-grid">
                    <div class="cost-item"><small>üå≤ Wood</small><span id="cav_wood">0</span></div>
                    <div class="cost-item"><small>üß± Clay</small><span id="cav_clay">0</span></div>
                    <div class="cost-item"><small>‚öíÔ∏è Iron</small><span id="cav_iron">0</span></div>
                    <div class="cost-item"><small>üåæ Crop</small><span id="cav_crop">0</span></div>
                </div>
            </div>
        </div>

        <div class="train-card">
            <div class="card-header header-sie">
                <span>üèöÔ∏è Siege</span>
                <small>Workshop</small>
            </div>
            <div class="card-body">
                <select id="unit_siege" class="unit-select" onchange="TroopApp.calculate()"></select>
                
                <div class="input-group">
                    <div class="input-row">
                        <label>Workshop</label>
                        <input type="number" id="lvl_workshop" value="20" min="0" max="20" oninput="TroopApp.calculate()">
                    </div>
                    <div class="output-row">
                        <span>Output</span>
                        <span class="output-val" id="out_siege_std">0</span>
                    </div>
                </div>
                <div style="height: 104px;"></div>
            </div>
            <div class="card-footer">
                <div class="footer-title">Siege Summary</div>
                <div class="summary-stats">
                    <div class="stat-item">Total: <span id="siege_total_units">0</span></div>
                    <div class="stat-item">Upkeep: <span id="siege_upkeep">0</span><span class="unit">/h</span></div>
                </div>
                <div class="cost-grid">
                    <div class="cost-item"><small>üå≤ Wood</small><span id="siege_wood">0</span></div>
                    <div class="cost-item"><small>üß± Clay</small><span id="siege_clay">0</span></div>
                    <div class="cost-item"><small>‚öíÔ∏è Iron</small><span id="siege_iron">0</span></div>
                    <div class="cost-item"><small>üåæ Crop</small><span id="siege_crop">0</span></div>
                </div>
            </div>
        </div>
    </div>

    <div class="results-box">
        <div class="global-stats-grid">
            <div class="g-stat">
                <h4>Troops Produced</h4>
                <div class="g-val" style="display:block;">
                    <div class="breakdown-row"><span>‚öîÔ∏è Infantry:</span> <span id="global_inf">0</span></div>
                    <div class="breakdown-row"><span>üêé Cavalry:</span> <span id="global_cav">0</span></div>
                    <div class="breakdown-row"><span>üèöÔ∏è Siege:</span> <span id="global_siege">0</span></div>
                </div>
            </div>
            <div class="g-stat" style="grid-column: span 2;">
                <h4>Total Resource Cost</h4>
                <div class="g-val" id="global_cost" style="font-size: 1.5rem; color: #859f51;">0</div>
                
                <div class="global-cost-grid">
                    <div class="gc-item"><span class="gc-label">üå≤ Wood</span><span class="gc-val" id="gc_wood">0</span></div>
                    <div class="gc-item"><span class="gc-label">üß± Clay</span><span class="gc-val" id="gc_clay">0</span></div>
                    <div class="gc-item"><span class="gc-label">‚öíÔ∏è Iron</span><span class="gc-val" id="gc_iron">0</span></div>
                    <div class="gc-item"><span class="gc-label">üåæ Crop</span><span class="gc-val" id="gc_crop">0</span></div>
                </div>
            </div>
            <div class="g-stat">
                <h4>Combat Power</h4>
                <div class="g-val" style="flex-direction:column; align-items:flex-start;">
                    <div style="font-size:1rem;">‚öîÔ∏è <span id="global_off">0</span></div>
                    <div style="font-size:1rem;">üõ°Ô∏è <span id="global_def">0</span></div>
                </div>
                <div class="g-sub" style="margin-top:10px;">
                    Upkeep: <span id="global_upkeep" style="color:#ffcc80; font-weight:bold;">0</span>/h
                </div>
            </div>
        </div>
    </div>
</div>

<script src="data.js"></script>
<script src="app.js"></script>
</body>
</html>