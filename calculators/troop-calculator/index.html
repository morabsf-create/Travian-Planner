<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Troop Training Calculator - Travian Tools</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Vollkorn:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../css/style.css">
    <style>
        .calc-wrapper { max-width: 1200px; margin: 0 auto; }
        .settings-bar { 
            background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #c9b7a2; 
            margin-bottom: 25px; display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;
        }
        
        .training-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 25px; }
        .train-card { background: #fff; border: 1px solid #c9b7a2; border-radius: 8px; overflow: hidden; }
        .card-header { 
            padding: 12px 15px; font-family: 'Vollkorn', serif; font-weight: bold; font-size: 1.1rem; 
            border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;
        }
        .header-inf { background-color: #e8f5e9; color: #2e7d32; }
        .header-cav { background-color: #fff3e0; color: #ef6c00; }
        .header-sie { background-color: #f3e5f5; color: #7b1fa2; }
        
        .card-body { padding: 20px; }
        .input-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
        .input-row label { font-size: 0.9rem; color: #555; font-weight: bold; }
        .input-row input, .input-row select { padding: 6px; border: 1px solid #ccc; border-radius: 4px; width: 80px; }
        .input-row select.unit-select { width: 100%; margin-bottom: 15px; padding: 8px; font-weight: bold; }

        .sub-section { margin-top: 15px; padding-top: 15px; border-top: 1px dashed #ddd; }
        .sub-label { display: block; font-size: 0.8rem; text-transform: uppercase; color: #999; margin-bottom: 8px; font-weight: bold; }

        .results-box { 
            background: #333; color: #fff; padding: 25px; border-radius: 8px; 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px;
        }
        .res-stat h4 { margin: 0 0 5px 0; color: #aaa; font-size: 0.85rem; text-transform: uppercase; }
        .res-stat .val { font-size: 1.8rem; font-weight: bold; font-family: 'Roboto', sans-serif; }
        .res-stat .sub { font-size: 0.9rem; color: #ccc; }
        
        /* Great Building Toggle Visuals */
        .gb-active input { border-color: #859f51; background-color: #f1f8e9; }
    </style>
</head>
<body>

<div class="container calc-wrapper">
    <div style="margin-bottom: 20px;">
        <a href="../../index.html" style="text-decoration: none; color: #859f51; font-weight: bold;">&larr; Back to Hub</a>
    </div>

    <h1>Troop Training Calculator</h1>
    
    <div class="settings-bar">
        <div>
            <label style="display:block; font-size:0.8rem; font-weight:bold; color:#777; margin-bottom:4px;">TRIBE</label>
            <select id="tribeSelect" style="width:100%; padding:8px; font-weight:bold;" onchange="TroopApp.updateUnitDropdowns()"></select>
        </div>
        <div>
            <label style="display:block; font-size:0.8rem; font-weight:bold; color:#777; margin-bottom:4px;">SERVER SPEED</label>
            <select id="serverSpeed" style="width:100%; padding:8px;" onchange="TroopApp.calculate()">
                <option value="1">1x</option>
                <option value="2">2x</option>
                <option value="3">3x</option>
                <option value="5">5x</option>
                <option value="10">10x</option>
            </select>
        </div>
        <div>
            <label style="display:block; font-size:0.8rem; font-weight:bold; color:#777; margin-bottom:4px;">DURATION (HOURS)</label>
            <input type="number" id="duration" value="24" min="1" style="width:100%; padding:8px; box-sizing:border-box;" oninput="TroopApp.calculate()">
        </div>
        <div>
            <label style="display:block; font-size:0.8rem; font-weight:bold; color:#777; margin-bottom:4px;">HELMET BONUS</label>
            <div style="display:flex; align-items:center;">
                <input type="number" id="helmet" value="0" min="0" max="100" style="width:100%; padding:8px; box-sizing:border-box;" oninput="TroopApp.calculate()">
                <span style="margin-left:5px;">%</span>
            </div>
        </div>
        <div>
            <label style="display:block; font-size:0.8rem; font-weight:bold; color:#777; margin-bottom:4px;">ARTIFACT</label>
            <select id="artifact" style="width:100%; padding:8px;" onchange="TroopApp.calculate()">
                <option value="1.0">None</option>
                <option value="0.75">Small (Train Faster)</option>
                <option value="0.5">Large/Unique</option>
            </select>
        </div>
        <div>
            <label style="display:block; font-size:0.8rem; font-weight:bold; color:#777; margin-bottom:4px;">ALLIANCE BONUS</label>
            <select id="allyBonus" style="width:100%; padding:8px;" onchange="TroopApp.calculate()">
                <option value="0">0%</option>
                <option value="0.02">2%</option>
                <option value="0.04">4%</option>
                <option value="0.06">6%</option>
                <option value="0.08">8%</option>
                <option value="0.10">10%</option>
            </select>
        </div>
    </div>

    <div class="training-grid">
        
        <div class="train-card">
            <div class="card-header header-inf">
                <span>‚öîÔ∏è Infantry</span>
                <small>Barracks</small>
            </div>
            <div class="card-body">
                <select id="unit_infantry" class="unit-select" onchange="TroopApp.calculate()"></select>
                
                <div class="input-row">
                    <label>Barracks Level</label>
                    <input type="number" id="lvl_barracks" value="20" min="0" max="20" oninput="TroopApp.calculate()">
                </div>

                <div class="sub-section">
                    <span class="sub-label">Great Barracks (3x Cost)</span>
                    <div class="input-row">
                        <label>Level (0 = Off)</label>
                        <input type="number" id="lvl_gb" value="0" min="0" max="20" oninput="TroopApp.calculate()">
                    </div>
                </div>
            </div>
        </div>

        <div class="train-card">
            <div class="card-header header-cav">
                <span>üêé Cavalry</span>
                <small>Stable</small>
            </div>
            <div class="card-body">
                <select id="unit_cavalry" class="unit-select" onchange="TroopApp.calculate()"></select>
                
                <div class="input-row">
                    <label>Stable Level</label>
                    <input type="number" id="lvl_stable" value="20" min="0" max="20" oninput="TroopApp.calculate()">
                </div>

                <div class="sub-section">
                    <span class="sub-label">Great Stable (3x Cost)</span>
                    <div class="input-row">
                        <label>Level (0 = Off)</label>
                        <input type="number" id="lvl_gs" value="0" min="0" max="20" oninput="TroopApp.calculate()">
                    </div>
                </div>
            </div>
        </div>

        <div class="train-card">
            <div class="card-header header-sie">
                <span>üèöÔ∏è Siege</span>
                <small>Workshop</small>
            </div>
            <div class="card-body">
                <select id="unit_siege" class="unit-select" onchange="TroopApp.calculate()"></select>
                
                <div class="input-row">
                    <label>Workshop Level</label>
                    <input type="number" id="lvl_workshop" value="20" min="0" max="20" oninput="TroopApp.calculate()">
                </div>
                
                <div class="sub-section">
                    <span class="sub-label">Note</span>
                    <div style="font-size: 0.85rem; color: #777;">
                        Standard Travian servers do not have a "Great Workshop".
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="results-box">
        <div class="res-stat">
            <h4>Total Units</h4>
            <div class="val" id="res_total_units">0</div>
            <div class="sub">Troops</div>
        </div>
        <div class="res-stat">
            <h4>Total Cost</h4>
            <div class="val" id="res_total_cost">0</div>
            <div class="sub">Resources</div>
        </div>
        <div class="res-stat">
            <h4>Crop Upkeep</h4>
            <div class="val" id="res_upkeep" style="color:#ffcc80;">0</div>
            <div class="sub">Per Hour</div>
        </div>
        <div class="res-stat">
            <h4>Combat Power</h4>
            <div class="sub">‚öîÔ∏è <span id="res_off">0</span></div>
            <div class="sub">üõ°Ô∏è <span id="res_def">0</span></div>
        </div>
    </div>
</div>

<script src="data.js"></script>
<script src="app.js"></script>
</body>
</html>