<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Troop Training Calculator - Travian Tools</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Vollkorn:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../css/style.css">
    <style>
        .calc-wrapper { max-width: 1200px; margin: 0 auto; }
        
        /* Settings Bar */
        .settings-bar { 
            background: #fff; padding: 15px; border-radius: 8px; border: 1px solid #c9b7a2; 
            margin-bottom: 20px; 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 15px;
        }
        .settings-bar label { display: block; font-size: 0.7rem; font-weight: bold; color: #777; margin-bottom: 4px; text-transform: uppercase; }
        .settings-bar select, .settings-bar input { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; font-weight: bold; color: #333; box-sizing: border-box; }

        /* Role Selector */
        .role-wrapper { display: flex; gap: 10px; margin-bottom: 20px; justify-content: center; }
        .role-btn { 
            padding: 10px 20px; border: 2px solid #ccc; background: #f9f9f9; cursor: pointer; border-radius: 20px; 
            font-weight: bold; color: #555; transition: all 0.2s; 
        }
        .role-btn.active { border-color: #859f51; background: #f1f8e9; color: #33691e; }
        .role-btn:hover { background: #eee; }

        /* Training Cards */
        .training-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .train-card { background: #fff; border: 1px solid #c9b7a2; border-radius: 8px; overflow: hidden; display: flex; flex-direction: column; }
        .card-header { padding: 12px 15px; font-family: 'Vollkorn', serif; font-weight: bold; font-size: 1.1rem; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
        
        .header-inf { background-color: #e8f5e9; color: #2e7d32; border-bottom-color: #c8e6c9; }
        .header-cav { background-color: #fff3e0; color: #ef6c00; border-bottom-color: #ffe0b2; }
        .header-sie { background-color: #f3e5f5; color: #7b1fa2; border-bottom-color: #e1bee7; }

        .card-body { padding: 20px; flex: 1; }
        
        /* Unit Rows */
        .unit-row { margin-bottom: 15px; }
        .unit-select { width: 100%; padding: 8px; font-size: 0.95rem; border: 1px solid #ccc; border-radius: 4px; font-weight: bold; margin-bottom: 5px; }
        
        /* Slider */
        .slider-container { display: flex; align-items: center; gap: 10px; margin: 15px 0; background: #fafafa; padding: 10px; border-radius: 6px; border: 1px dashed #ddd; }
        .slider-val { font-size: 0.8rem; font-weight: bold; color: #555; width: 40px; text-align: center; }
        input[type=range] { flex: 1; accent-color: #859f51; }

        .helmet-select { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; font-weight: bold; color: #555; margin-bottom: 15px; }

        .input-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px dashed #eee; }
        .input-row label { font-size: 0.9rem; font-weight: bold; color: #555; }
        .input-row select { width: 70px; padding: 6px; text-align: center; border: 1px solid #ccc; border-radius: 4px; font-weight: bold; }

        /* Card Footer */
        .card-footer { background-color: #fafafa; border-top: 1px solid #eee; padding: 15px; }
        .footer-tiles { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; margin-top: 10px; }
        .mini-tile { background: #fff; border: 1px solid #eee; border-radius: 4px; padding: 5px; text-align: center; }
        .mini-tile label { font-size: 0.65rem; color: #999; text-transform: uppercase; display:block; margin-bottom: 2px; }
        .mini-tile span { font-size: 0.85rem; font-weight: bold; color: #555; font-family: 'Roboto', sans-serif; }
        
        .main-stats-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px; }
        .stat-box { background: #fff; border: 1px solid #ddd; padding: 8px; border-radius: 4px; text-align: center; }
        .stat-box label { display: block; font-size: 0.7rem; color: #888; text-transform: uppercase; }
        .stat-box span { font-weight: bold; color: #333; font-size: 1rem; }
        .c-upkeep { color: #fdd835 !important; }

        /* Global Results */
        .results-box { background: #333; color: #fff; padding: 20px; border-radius: 8px; }
        .summary-group { margin-bottom: 25px; }
        .group-title { font-size: 0.85rem; text-transform: uppercase; color: #859f51; border-bottom: 1px solid #555; padding-bottom: 5px; margin-bottom: 10px; letter-spacing: 1px; font-weight: bold; }
        .tiles-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .stat-tile { background: rgba(255,255,255,0.08); border-radius: 6px; padding: 12px; text-align: center; border: 1px solid rgba(255,255,255,0.05); }
        .tile-label { font-size: 0.65rem; text-transform: uppercase; color: #aaa; margin-bottom: 5px; }
        .tile-val { font-size: 1.1rem; font-weight: bold; font-family: 'Roboto', sans-serif; }
        
        .c-off { color: #ffab91; }
        .c-def { color: #90caf9; }
        .c-wood { color: #a5d6a7; }
        .c-clay { color: #ffcc80; }
        .c-iron { color: #b0bec5; }
        .c-crop { color: #fff59d; }

        .res-breakdown-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }

        @media (max-width: 600px) {
            .training-grid { grid-template-columns: 1fr; }
            .tiles-grid { grid-template-columns: 1fr 1fr; } 
            .res-breakdown-grid { grid-template-columns: 1fr 1fr; } 
            .footer-tiles { grid-template-columns: 1fr 1fr; }
        }
    </style>
</head>
<body>

<div class="container calc-wrapper">
    <div style="margin-bottom: 20px;">
        <a href="../../index.html" style="text-decoration: none; color: #859f51; font-weight: bold;">&larr; Back to Hub</a>
    </div>

    <h1>Troop Training Calculator</h1>
    
    <div class="settings-bar">
        <div>
            <label>TRIBE</label>
            <select id="tribeSelect" onchange="TroopApp.updateUnitDropdowns()"></select>
        </div>
        <div>
            <label>SERVER SPEED</label>
            <select id="serverSpeed" onchange="TroopApp.calculate()">
                <option value="1">1x</option>
                <option value="2">2x</option>
                <option value="3">3x</option>
                <option value="5">5x</option>
                <option value="10">10x</option>
            </select>
        </div>
        <div>
            <label>DURATION (HOURS)</label>
            <input type="number" id="duration" value="1" min="1" oninput="TroopApp.calculate()">
        </div>
        <div>
            <label>ALLIANCE BONUS</label>
            <select id="allyBonus" onchange="TroopApp.calculate()">
                <option value="0">0%</option>
                <option value="0.02">2%</option>
                <option value="0.04">4%</option>
                <option value="0.06">6%</option>
                <option value="0.08">8%</option>
                <option value="0.10">10%</option>
            </select>
        </div>
        <div>
            <label>ARTIFACT</label>
            <select id="artifact" onchange="TroopApp.calculate()">
                <option value="1.0">None (100% Time)</option>
                <option value="0.75">Small (75% Time)</option>
                <option value="0.5">Unique (50% Time)</option>
            </select>
        </div>
    </div>

    <div class="role-wrapper">
        <button class="role-btn active" onclick="TroopApp.setRole('hammer', this)">‚öîÔ∏è HAMMER</button>
        <button class="role-btn" onclick="TroopApp.setRole('anvil', this)">üõ°Ô∏è ANVIL</button>
        <button class="role-btn" onclick="TroopApp.setRole('scout', this)">üî≠ SCOUT</button>
    </div>

    <div class="training-grid">
        
        <div class="train-card">
            <div class="card-header header-inf">
                <span>‚öîÔ∏è Infantry</span>
                <small>Barracks</small>
            </div>
            <div class="card-body">
                <select id="inf_helmet" class="helmet-select" onchange="TroopApp.calculate()">
                    <option value="0">Helm: 0%</option>
                    <option value="10">Helm: 10%</option>
                    <option value="15">Helm: 15%</option>
                    <option value="20">Helm: 20%</option>
                </select>

                <div class="unit-row">
                    <label>Primary Unit</label>
                    <select id="unit_infantry_1" class="unit-select" onchange="TroopApp.onUnitChange('infantry')"></select>
                </div>
                
                <div class="slider-container" id="slider_inf_wrap" style="display:none;">
                    <span class="slider-val" id="val_inf_1">100%</span>
                    <input type="range" id="slider_inf" min="0" max="100" value="100" oninput="TroopApp.onSliderChange('inf')">
                    <span class="slider-val" id="val_inf_2">0%</span>
                </div>

                <div class="unit-row">
                    <label>Secondary Unit (Optional)</label>
                    <select id="unit_infantry_2" class="unit-select" onchange="TroopApp.onUnitChange('infantry')">
                        <option value="">-- None --</option>
                    </select>
                </div>
                
                <div class="input-row">
                    <label>Barracks Level</label>
                    <select id="lvl_barracks" onchange="TroopApp.calculate()"></select>
                </div>
                <div class="input-row">
                    <label>Great Barracks Level</label>
                    <select id="lvl_gb" onchange="TroopApp.calculate()"></select>
                </div>
            </div>
            <div class="card-footer">
                <div class="main-stats-row">
                    <div class="stat-box">
                        <label>Units Trained</label>
                        <span id="inf_total_units" style="color:#2e7d32;">0</span>
                    </div>
                    <div class="stat-box">
                        <label>Upkeep /h</label>
                        <span id="inf_upkeep" class="c-upkeep">0</span>
                    </div>
                </div>
                <div class="footer-tiles">
                    <div class="mini-tile"><label>Wood</label><span id="inf_wood">0</span></div>
                    <div class="mini-tile"><label>Clay</label><span id="inf_clay">0</span></div>
                    <div class="mini-tile"><label>Iron</label><span id="inf_iron">0</span></div>
                    <div class="mini-tile"><label>Crop</label><span id="inf_crop">0</span></div>
                </div>
            </div>
        </div>

        <div class="train-card">
            <div class="card-header header-cav">
                <span>üêé Cavalry</span>
                <small>Stable</small>
            </div>
            <div class="card-body">
                <select id="cav_helmet" class="helmet-select" onchange="TroopApp.calculate()">
                    <option value="0">Helm: 0%</option>
                    <option value="10">Helm: 10%</option>
                    <option value="15">Helm: 15%</option>
                    <option value="20">Helm: 20%</option>
                </select>

                <div class="unit-row">
                    <label>Primary Unit</label>
                    <select id="unit_cavalry_1" class="unit-select" onchange="TroopApp.onUnitChange('cavalry')"></select>
                </div>

                <div class="slider-container" id="slider_cav_wrap" style="display:none;">
                    <span class="slider-val" id="val_cav_1">100%</span>
                    <input type="range" id="slider_cav" min="0" max="100" value="100" oninput="TroopApp.onSliderChange('cav')">
                    <span class="slider-val" id="val_cav_2">0%</span>
                </div>

                <div class="unit-row">
                    <label>Secondary Unit</label>
                    <select id="unit_cavalry_2" class="unit-select" onchange="TroopApp.onUnitChange('cavalry')">
                        <option value="">-- None --</option>
                    </select>
                </div>
                
                <div class="input-row">
                    <label>Stable Level</label>
                    <select id="lvl_stable" onchange="TroopApp.calculate()"></select>
                </div>
                <div class="input-row">
                    <label>Great Stable Level</label>
                    <select id="lvl_gs" onchange="TroopApp.calculate()"></select>
                </div>
            </div>
            <div class="card-footer">
                <div class="main-stats-row">
                    <div class="stat-box">
                        <label>Units Trained</label>
                        <span id="cav_total_units" style="color:#ef6c00;">0</span>
                    </div>
                    <div class="stat-box">
                        <label>Upkeep /h</label>
                        <span id="cav_upkeep" class="c-upkeep">0</span>
                    </div>
                </div>
                <div class="footer-tiles">
                    <div class="mini-tile"><label>Wood</label><span id="cav_wood">0</span></div>
                    <div class="mini-tile"><label>Clay</label><span id="cav_clay">0</span></div>
                    <div class="mini-tile"><label>Iron</label><span id="cav_iron">0</span></div>
                    <div class="mini-tile"><label>Crop</label><span id="cav_crop">0</span></div>
                </div>
            </div>
        </div>

        <div class="train-card">
            <div class="card-header header-sie">
                <span>üèöÔ∏è Siege</span>
                <small>Workshop</small>
            </div>
            <div class="card-body">
                <div style="height: 52px; margin-bottom:15px;"></div>

                <div class="unit-row">
                    <label>Primary Unit</label>
                    <select id="unit_siege_1" class="unit-select" onchange="TroopApp.onUnitChange('siege')"></select>
                </div>

                <div class="slider-container" id="slider_siege_wrap" style="display:none;">
                    <span class="slider-val" id="val_siege_1">100%</span>
                    <input type="range" id="slider_siege" min="0" max="100" value="100" oninput="TroopApp.onSliderChange('siege')">
                    <span class="slider-val" id="val_siege_2">0%</span>
                </div>

                <div class="unit-row">
                    <label>Secondary Unit</label>
                    <select id="unit_siege_2" class="unit-select" onchange="TroopApp.onUnitChange('siege')">
                        <option value="">-- None --</option>
                    </select>
                </div>
                
                <div class="input-row">
                    <label>Workshop Level</label>
                    <select id="lvl_workshop" onchange="TroopApp.calculate()"></select>
                </div>
                <div style="height: 53px;"></div>
            </div>
            <div class="card-footer">
                <div class="main-stats-row">
                    <div class="stat-box">
                        <label>Units Trained</label>
                        <span id="siege_total_units" style="color:#7b1fa2;">0</span>
                    </div>
                    <div class="stat-box">
                        <label>Upkeep /h</label>
                        <span id="siege_upkeep" class="c-upkeep">0</span>
                    </div>
                </div>
                <div class="footer-tiles">
                    <div class="mini-tile"><label>Wood</label><span id="siege_wood">0</span></div>
                    <div class="mini-tile"><label>Clay</label><span id="siege_clay">0</span></div>
                    <div class="mini-tile"><label>Iron</label><span id="siege_iron">0</span></div>
                    <div class="mini-tile"><label>Crop</label><span id="siege_crop">0</span></div>
                </div>
            </div>
        </div>
    </div>

    <div class="results-box">
        
        <div class="summary-group">
            <div class="group-title">Army Strength & Power</div>
            <div class="tiles-grid" style="grid-template-columns: repeat(3, 1fr);">
                <div class="stat-tile">
                    <span class="tile-label" id="lbl_inf">INFANTRY</span>
                    <span class="tile-val" id="global_inf">0</span>
                </div>
                <div class="stat-tile">
                    <span class="tile-label" id="lbl_cav">CAVALRY</span>
                    <span class="tile-val" id="global_cav">0</span>
                </div>
                <div class="stat-tile">
                    <span class="tile-label" id="lbl_siege">SIEGE</span>
                    <span class="tile-val" id="global_siege">0</span>
                </div>
            </div>
            <div class="tiles-grid" style="margin-top:10px; grid-template-columns: repeat(3, 1fr);">
                <div class="stat-tile">
                    <span class="tile-label">TOTAL OFFENSE</span>
                    <span class="tile-val c-off" id="global_off">0</span>
                </div>
                <div class="stat-tile">
                    <span class="tile-label">DEFENSE VS INFANTRY</span>
                    <span class="tile-val c-def" id="global_def_inf">0</span>
                </div>
                <div class="stat-tile">
                    <span class="tile-label">DEFENSE VS CAVALRY</span>
                    <span class="tile-val c-def" id="global_def_cav">0</span>
                </div>
            </div>
        </div>

        <div class="summary-group">
            <div class="group-title">Economics Overview</div>
            <div class="tiles-grid" style="grid-template-columns: repeat(3, 1fr);">
                <div class="stat-tile">
                    <span class="tile-label">TOTAL UPKEEP</span>
                    <span class="tile-val c-upkeep"><span id="global_upkeep">0</span>/h</span>
                </div>
                <div class="stat-tile">
                    <span class="tile-label">TOTAL COST</span>
                    <span class="tile-val" id="global_cost">0</span>
                </div>
                <div class="stat-tile">
                    <span class="tile-label">SUPPLY VILLAGES</span>
                    <span class="tile-val" style="color:#e0e0e0;" id="global_push_villages">0</span>
                    <span class="tile-sub">L10 Fields + Plus</span>
                </div>
            </div>
        </div>

        <div class="summary-group">
            <div class="group-title">Resource Breakdown</div>
            <div class="res-breakdown-grid">
                 <div class="stat-tile">
                    <span class="tile-label">üå≤ WOOD</span>
                    <span class="tile-val c-wood" id="gc_wood">0</span>
                </div>
                 <div class="stat-tile">
                    <span class="tile-label">üß± CLAY</span>
                    <span class="tile-val c-clay" id="gc_clay">0</span>
                </div>
                 <div class="stat-tile">
                    <span class="tile-label">‚öíÔ∏è IRON</span>
                    <span class="tile-val c-iron" id="gc_iron">0</span>
                </div>
                 <div class="stat-tile">
                    <span class="tile-label">üåæ CROP</span>
                    <span class="tile-val c-crop" id="gc_crop">0</span>
                </div>
            </div>
        </div>

    </div>
</div>

<script src="data.js"></script>
<script src="app.js"></script>
</body>
</html>